---
outline: deep
---

# ECMAScript 12 學習筆記

> 參考學習資源：[阮一峰 ECMAScript 6 (ES6) 標準入門教程](https://es6.ruanyifeng.com/)

## Logical Assignment Operators

> ES2021 引入了三個新的邏輯賦值運算子 `||=`、`&&=`、`??=`，將邏輯運算子與賦值運算子進行結合。

```js
// Logical OR assignment (||=)
x ||= y
// 等同於
x = x || y

// Logical AND assignment (&&=)
x &&= y
// 等同於
x = x && y

// Nullish coalescing assignment (??=)
x ??= y
// 等同於
x = x ?? y
```

它們的一個用途是，為變數或屬性設定預設值。

```js
// 舊的寫法
user.id = user.id || 1;

// 新的寫法
user.id ||= 1;
```

> `user.id` 屬性如果不存在，則設為 `1`

```js
// 舊的寫法
function example(opts) {
  opts.foo = opts.foo ?? 'bar';
  opts.baz ?? (opts.baz = 'qux');
}

// 新的寫法
function example(opts) {
  opts.foo ??= 'bar';
  opts.baz ??= 'qux';
}
```

> 參數物件 `opts` 如果不存在屬性 `foo` 和屬性 `baz`，則為這兩個屬性設定預設值。

## Numeric Separators

這個新特性是為了方便查看程式碼而出現的，如果今天有一個數值比較大，那麼看起來就不是那麼一目了然。例如：

```js
const num = 123456789;
```

[ES2021](https://github.com/tc39/proposal-numeric-separator)，允許 JavaScript 的數值使用下底線（`_`）作為分隔符。

```js
// 數值分隔符沒有指定間隔的位數
const num = 123_456_78_9;
const num2 = 123456789;

console.log(num === num2); // true
```

除了十進位，其他進位的數值也可以使用分隔符。

```js
const binary = 0b0010_1010;
const octal = 0o12_34_56;
const hex = 0xa1_b3_c3;
```

數值分隔符有幾個使用注意點：

- 不能放在數值的最前面（leading）或最後面（trailing）。
- 不能兩個或兩個以上的分隔符連在一起。
- 小數點的前後不能有分隔符。
- 科學記號裡面，表示指數的`e`或`E`前後不能有分隔符。

```js
// 全部報錯
3_.141
3._141
1_e12
1e_12
123__456
_1464301
1464301_
```
